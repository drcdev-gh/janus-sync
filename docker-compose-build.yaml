
services:
  janus-sync:
    hostname: janus
    build:
      context: .
      dockerfile: Dockerfile
    restart: unless-stopped
    ports:
      - "8085:8085"
    environment:
      POCKETID_API_URL: ${POCKETID_API_URL:?err=ENV missing}
      POCKETID_API_KEY: ${POCKETID_API_KEY:?err=ENV missing}
      OUTLINE_API_URL: ${OUTLINE_API_URL:?err=ENV missing}
      OUTLINE_API_KEY: ${OUTLINE_API_KEY:?err=ENV missing}
      SSH_ALLOWED_GROUP: ${SSH_ALLOWED_GROUP:?err=ENV missing}
      API_KEY: ${API_KEY:?err=ENV missing}
    networks:
      - janus-net

  ssh-test:
    hostname: ssh-test
    build:
      context: ./test/ssh
      dockerfile: Dockerfile
    restart: unless-stopped
    ports:
      - "2222:22"
    networks:
      - janus-net

networks:
  janus-net:
